import {REQUEST_RAID,
		RECEIVE_RAID,
		RECEIVE_RAID_ERROR,
		
        CREATE_RAID_SUCCESS,
        CREATE_RAID_ERROR,
        DELETE_RAID_SUCCESS,
        DELETE_RAID_ERROR,
        
        TOGGLE_RAID,
        ECHO_RAID,
        CLOSE_RAID,

        ECHO_CREATE_RAID_LOADRESUME_MODAL,
        CLOSE_CREATE_RAID_LOADRESUME_MODAL,
        CREATE_RAID_LOADRESUME,
        CREATE_RAID_LOADRESUME_OK,
        CREATE_RAID_LOADRESUME_ERROR,
} from '../actions/raidactions'
import update from 'immutability-helper';

function Raid(state={isFetching:false,didInvalidate:true,items:[]},action) {
    switch (action.type) {
        case REQUEST_RAID:
            return Object.assign({}, state, {
                isFetching: true,
                didInvalidate: false,
                items:[],
                selectedRaid:[],
                selectedRowKeys:[]            
            })
        case RECEIVE_RAID:
            return Object.assign({}, state, {
                isFetching: false,
                didInvalidate: false,
                items:action.raid,
            })
        case RECEIVE_RAID_ERROR:
            return Object.assign({}, state, {
                isFetching: false,
                didInvalidate: true
            })
        case ECHO_RAID:
            return Object.assign({}, state, {
                create_raid: true,
                
            })
        
        case CLOSE_RAID:
            return Object.assign({}, state, {
                create_raid: false,
            })

        case TOGGLE_RAID:
            return Object.assign({},state,{
                selectedRaid:action.selectedRaid,
                selectedRowKeys:action.selectedRowKeys
            })
        case  ECHO_CREATE_RAID_LOADRESUME_MODAL:
             return Object.assign({}, state, {
                create_raid_loadresume: true,
            })
        case CLOSE_CREATE_RAID_LOADRESUME_MODAL:
            return Object.assign({}, state, {
               create_raid_loadresume: false,
            })

        case DELETE_RAID_SUCCESS:
            return Object.assign({},state,{items:state.items.filter(function(item){ return(item.id != action.raid.id) },action)})
        case DELETE_RAID_ERROR:
            return state
        case CREATE_RAID_SUCCESS:
            return update(state,{items:{$unshift:[action.raid]}})
        case CREATE_RAID_ERROR:
            return state                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
        case CREATE_RAID_LOADRESUME_OK:
        	return update(state,{items:{$unshift:[action.raid]}})
        case CREATE_RAID_LOADRESUME_ERROR:
        	return state
        case  CREATE_RAID_LOADRESUME:
        	return state
        default:
            return state
     
    }
}
function raid(state={isFetching:false,didInvalidate:true,items:[]},action) {
    return Raid(state,action)
}

export default raid
